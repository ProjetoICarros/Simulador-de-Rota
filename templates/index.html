<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Simulador de Rota de Veículo Elétrico</title>
    <script>
        function atualizarAutonomiaEConsumo() {
            const modelo = document.querySelector('select[name="modelo"]').value;
            const autonomiaInput = document.querySelector('input[name="autonomia"]');
            const consumoInput = document.querySelector('input[name="consumo"]');
            const capacidadeInput = document.querySelector('input[name="capacidade"]');
            
            // Definindo as autonomias, consumos e capacidades de bateria para cada modelo
            const dadosVeiculos = {
            };
            
            // Atualizando os campos de autonomia, consumo e capacidade de bateria com os valores correspondentes
            const dados = dadosVeiculos[modelo];
            autonomiaInput.value = dados ? dados.autonomia : '';
            consumoInput.value = dados ? dados.consumo.toFixed(2) : ''; // Fraciona o consumo com duas casas decimais
            capacidadeInput.value = dados ? dados.capacidade : ''; // Preenche a capacidade de bateria
        }
    </script>
</head>
<body>
    <h1>Simulação de Rotas com Postos de Recarga</h1>
    <form method="post">
        <!-- Seleção da marca e modelo do veículo -->
        <label>Marca do Veículo :</label>
        <select name="modelo" onchange="atualizarAutonomiaEConsumo()">
        </select><br>

        <label>Modelo do Veículo :</label>
        <select name="modelo" onchange="atualizarAutonomiaEConsumo()">
        </select><br>
        
        <!-- Campo de autonomia preenchido automaticamente -->
        <label>Autonomia do Veículo (km):</label>
        <input type="text" name="autonomia" readonly><br>
        
        <!-- Campo de consumo preenchido automaticamente -->
        <label>Consumo por km (kWh):</label>
        <input type="text" name="consumo" readonly><br>
        
        <!-- Campo de capacidade da bateria preenchido automaticamente -->
        <label>Capacidade da Bateria (kWh):</label>
        <input type="text" name="capacidade" readonly><br>
        
        <!-- Outros campos do formulário -->
        <label>Condição de Tráfego:</label>
        <select name="trafego">
            <option value="normal">Normal</option>
            <option value="moderado">Moderado</option>
            <option value="intenso">Intenso</option>
            <option value="congestionado">Congestionado</option>
        </select><br>
        
        <button type="submit">Simular Rota</button>
    </form>

    {% if pontos_recarga %}
        <h2>Paradas de Recarga:</h2>
        <ul>
            {% for ponto in pontos_recarga %}
                <li>{{ ponto }}</li>
            {% endfor %}
        </ul>
        <p>Tempo Total de Recarga: {{ tempo_total }} horas</p>
        <iframe src="{{ url_for('static', filename=mapa) }}" width="100%" height="500"></iframe>
    {% endif %}
    
    <hr>
<a href="{{ url_for('relatorio') }}">Ver Relatório de Lacunas e Melhorias</a> 
<br>
<a href="{{ url_for('adicionar_posto') }}">Adcionar Novo Posto de Recarga</a>
</body>
</html>
